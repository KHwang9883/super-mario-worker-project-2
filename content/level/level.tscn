[gd_scene load_steps=26 format=3 uid="uid://c5d467llk4uur"]

[ext_resource type="Script" uid="uid://c7qw0nusd1p15" path="res://script/level/level_loader/SmwlLevel.cs" id="1_rpefo"]
[ext_resource type="Script" uid="uid://c8yu81i46jf4r" path="res://script/level/level_loader/SmwlLoader.cs" id="1_wc7qm"]
[ext_resource type="TileSet" uid="uid://bnf7dwxlyydri" path="res://content/level/tile/obstacles.tileset.tres" id="2_dugl1"]
[ext_resource type="PackedScene" uid="uid://btrs3yxvgq8sl" path="res://content/level/level_template.tscn" id="2_s4cnv"]
[ext_resource type="Resource" uid="uid://ch6ocvrds2bxf" path="res://content/level/database/object_database_enemy.tres" id="4_3dhsb"]
[ext_resource type="Script" uid="uid://bsg2x1q80u5ee" path="res://script/level/level_loader/SmwlDataHolder.cs" id="5_y2vn4"]
[ext_resource type="Resource" uid="uid://dg3a08a8q43kb" path="res://content/level/database/block_database.tres" id="6_4alqs"]
[ext_resource type="Resource" uid="uid://b0vehdd53vipj" path="res://content/level/database/object_database_scenery.tres" id="6_228od"]
[ext_resource type="TileSet" uid="uid://obv64rtoaukf" path="res://content/level/tile/blocks.tileset.tres" id="7_fn8k0"]
[ext_resource type="Resource" uid="uid://dp3ucvu1lpy7l" path="res://content/level/database/object_database_marks.tres" id="7_ysoro"]
[ext_resource type="Resource" uid="uid://cjm2781r56j71" path="res://content/level/database/object_database_bonus.tres" id="8_ysoro"]
[ext_resource type="Script" uid="uid://daesa20urbh15" path="res://script/level/tile/BlockTileLayer.cs" id="11_d3lay"]
[ext_resource type="Texture2D" uid="uid://dhketxxxmk7rt" path="res://content/ui/option.png" id="13_ovbgs"]
[ext_resource type="Theme" uid="uid://ds3uq7lyxof1e" path="res://content/level/hud/mw/font_theme/mw_hud.tres" id="14_vqugj"]
[ext_resource type="PackedScene" uid="uid://bp2o2sissltwg" path="res://content/ui/smwp_button.tscn" id="15_23xuv"]
[ext_resource type="FontFile" uid="uid://cmajknwx1wwap" path="res://content/ui/font/ARIALBI.TTF" id="16_aecfo"]
[ext_resource type="Script" uid="uid://bwb13j85jw8c8" path="res://script/ui/JumpToSceneButton.cs" id="17_20wvl"]
[ext_resource type="Texture2D" uid="uid://b15l5knf8un71" path="res://content/ui/smwp_button_normal_with_shadow.png" id="18_fjxnd"]

[sub_resource type="GDScript" id="GDScript_fn8k0"]
script/source = "extends Camera2D

@export var speed: float = 800

func _process(delta: float) -> void:
	var x := (1 if Input.is_key_pressed(KEY_RIGHT) else 0) + (-1 if Input.is_key_pressed(KEY_LEFT) else 0)
	var y := (1 if Input.is_key_pressed(KEY_DOWN) else 0) + (-1 if Input.is_key_pressed(KEY_UP) else 0)
	translate(Vector2i(x, y) * speed * delta)
	return
"

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_yrvep"]
bg_color = Color(0.6, 0.6, 0.6, 0)
draw_center = false

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_6mkpa"]
bg_color = Color(0.6, 0.6, 0.6, 0)
draw_center = false

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_wdnmx"]
draw_center = false

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_1a3sc"]
draw_center = false

[sub_resource type="FontVariation" id="FontVariation_kx81q"]
base_font = ExtResource("16_aecfo")
variation_embolden = 1.0
variation_transform = Transform2D(1, 0, 0, 1.4, 0, 0)
spacing_glyph = 1
spacing_top = 5

[sub_resource type="Theme" id="Theme_x3yqh"]
default_font = SubResource("FontVariation_kx81q")
default_font_size = 9
Button/colors/font_color = Color(1, 1, 1, 1)
Button/colors/font_outline_color = Color(0.2, 0.2, 0.2, 0.7294118)
Button/constants/outline_size = 5
Button/font_sizes/font_size = 11
Button/styles/focus = SubResource("StyleBoxFlat_yrvep")
Button/styles/hover = SubResource("StyleBoxFlat_6mkpa")
Button/styles/normal = SubResource("StyleBoxFlat_wdnmx")
Button/styles/pressed = SubResource("StyleBoxFlat_1a3sc")

[node name="Level" type="Node2D" node_paths=PackedStringArray("BlocksTilemap", "DatabaseHolder", "ObstacleTileMap", "SmwlLoader", "OpenSmwlDialog") groups=["smwl_level"]]
script = ExtResource("1_rpefo")
LevelTemplate = ExtResource("2_s4cnv")
BlocksTilemap = NodePath("Block Tile Map")
DatabaseHolder = NodePath("Database Holder")
ObstacleTileMap = NodePath("Obstacle Tile Map")
SmwlLoader = NodePath("SMWL Loader")
OpenSmwlDialog = NodePath("Open SMWL File")

[node name="Database Holder" type="Node" parent="."]
script = ExtResource("5_y2vn4")
BlockDatabase = ExtResource("6_4alqs")
ObjectDatabases = Array[Object]([ExtResource("4_3dhsb"), ExtResource("6_228od"), ExtResource("7_ysoro"), ExtResource("8_ysoro")])

[node name="Obstacle Tile Map" type="TileMapLayer" parent="."]
visible = false
tile_set = ExtResource("2_dugl1")

[node name="Block Tile Map" type="TileMapLayer" parent="."]
z_index = 90
tile_set = ExtResource("7_fn8k0")
collision_enabled = false

[node name="BlockTileLayer" type="Node" parent="Block Tile Map" node_paths=PackedStringArray("_smwlLevel", "_blockTile")]
script = ExtResource("11_d3lay")
_smwlLevel = NodePath("../..")
_blockTile = NodePath("..")
_targetZIndex = Dictionary[int, int]({
0: 350,
1: 96,
2: 50
})

[node name="SMWL Loader" type="Node" parent="."]
script = ExtResource("1_wc7qm")
metadata/_custom_type_script = "uid://c8yu81i46jf4r"

[node name="Open SMWL File" type="FileDialog" parent="."]
oversampling_override = 1.0
title = "Open a SMWL File"
file_mode = 0
access = 2
filters = PackedStringArray("*.smwl")
use_native_dialog = true

[node name="Debug Camera" type="Camera2D" parent="."]
process_mode = 4
position = Vector2(320, 240)
enabled = false
process_callback = 0
script = SubResource("GDScript_fn8k0")

[node name="Basic" type="Control" parent="."]
z_index = -1024
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 640.0
offset_bottom = 480.0
grow_horizontal = 2
grow_vertical = 2

[node name="OptionBackground" type="Sprite2D" parent="Basic"]
position = Vector2(320, 240)
texture = ExtResource("13_ovbgs")
metadata/_edit_lock_ = true

[node name="Play" type="Label" parent="Basic"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -55.5
offset_top = -12.5
offset_right = 55.5
offset_bottom = 12.5
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 3
theme = ExtResource("14_vqugj")
text = "Level is Loading..."
uppercase = true

[node name="Back" parent="Basic" instance=ExtResource("15_23xuv")]
z_index = 1
layout_mode = 0
offset_left = 563.0
offset_top = 425.0
offset_right = 622.0
offset_bottom = 459.0
theme = SubResource("Theme_x3yqh")
theme_override_font_sizes/font_size = 12
text = "BACK"
alignment = 1
script = ExtResource("17_20wvl")
metadata/_edit_lock_ = true

[node name="Sprite2D" type="Sprite2D" parent="Basic/Back"]
z_index = -1
position = Vector2(30, 17)
texture = ExtResource("18_fjxnd")

[connection signal="canceled" from="Open SMWL File" to="." method="JumpToScene" binds= ["uid://2h2s1iqemydd"]]
[connection signal="pressed" from="Basic/Back" to="Basic/Back" method="JumpToScene" flags=3 binds= [&"uid://2h2s1iqemydd"]]
